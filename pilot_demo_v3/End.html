<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Voting strategy experiment</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap-grid.min.css" />
	<link rel="stylesheet" type="text/css" href="css/htmleaf-demo.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script src="js/button control.js" type="text/javascript"></script>
</head>
<body>
	<div class="htmleaf-container">
		<header class="htmleaf-header">
			<h1>Public Opinions of Politicians<span></span></h1>

		</header>
<!--page 1 pre-survey-->

<!--page 2 SSSsurvey -->
		<div class="demo">
			<div class="container">
	            <div class="row pad-15">
                	<div class= "instruction" id="instruction-end" style="margin-left: 20px;">
<!--                 		<h2>It is the end of the survey! </h2>
                		</br>
                		<h2>Thank you very much for your participation!</h2> -->
                		<p style="font-size: 22px;">Thank you for your participating! You have finished all the tasks. If you have any questions about the study, you should send an email to the principal investigator, Prof. Tor Wager (<a href="tor.wager@colorado.edu">tor.wager@colorado.edu</a>), and we will respond to you as soon as possible. </p>
						<p style="font-size: 22px;">The photos of candidates provided in the experiment are real photos of politicians in US. However, the information provided about the candidates was fabricated. The true purpose of the study was to investigate how people’s opinions towards others is influenced by new information. Thank you very much for your understanding!
						</p>
						<p style="font-size: 22px;">If you have any comments about the research, please write them down:</p>
						<input id="feedback" name="feedback" type="string" placeholder="please write your comments here" style="width: 700px; padding-bottom: 50px;">
                	</div>
        		    <center>
						<!-- <div>
							<a href="./start.html" class="myButton">Exit</a>
						</div> -->
						<div class="instructionsnav">
							<div class="row">
								<div class="col-xs-2">
									<!-- no previous button on first screen -->
								</div>
								<div class="col-xs-8">
									<button type="button" id="next" value="end" class="btn btn-primary btn-lg continue" onclick="custom_close()">Finish <span class="glyphicon glyphicon-arrow-right"></span>
									</button>
								</div>
								<div class="col-xs-2">
								</div>
							</div>
						</div>
					</center>

				    <div>
				    	
				   </div>
				</div>
    		</div>
		</div>

		<div class="related">
		    <h4>Copyright © CANLAB, All Rights Reserved.</h4>
			<!-- <a href="Email: xxxxxx@colorado.edu">Email: xxxxxx@colorado.edu</a> -->
			
		</div>
	</div>
	
	<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
	<script src="js/button control.js" type="text/javascript"></script>
	<script type="text/javascript">

		function custom_close(){
			var c_value = document.getElementById("feedback").value;

			psiTurk.recordUnstructuredData("Comment", c_value);
			psiTurk.saveData();
			console.log("12345")
			// psiTurk.saveData({
	  //           success: function(){
	  //               psiTurk.computeBonus('compute_bonus', function() { 
	  //               	psiTurk.completeHIT(); // when finished saving compute bonus, the quit
	  //               }); 
	  //           }, 
	  //           error: });

			var error_message = "<h1>Oops!</h1><p>Something went wrong submitting your HIT. This might happen if you lose your internet connection. Press the button to resubmit.</p><button id='resubmit'>Resubmit</button>";

			console.log("6789")

			prompt_resubmit = function() {
				document.body.innerHTML = error_message;
				console.log("101112")
				$("#resubmit").click(resubmit);
			};

			resubmit = function() {
				console.log("121314")
				document.body.innerHTML = "<h1>Trying to resubmit...</h1>";
				reprompt = setTimeout(prompt_resubmit, 10000);
				
				console.log("151617")
				psiTurk.saveData({
					success: function() {
					    clearInterval(reprompt); 
		                psiTurk.computeBonus('compute_bonus', function(){
		                	console.log("212223")
		                	psiTurk.completeHIT(); // when finished saving compute bonus, the quit
		                }); 


					}, 
					error: prompt_resubmit()
					
				});
			};

			console.log("HIT finished!!!!!")
			psiTurk.completeHIT(); // when finished saving compute bonus, the quit








			// if 
			// (confirm("Remember your finish code: 12345")){
			// window.opener=null;
			// window.open('','_self');
			// window.close();
			// }
			// else{}
		}
	</script> 