<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Voting strategy experiment</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap-grid.min.css" />
	<link rel="stylesheet" type="text/css" href="css/htmleaf-demo.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<!-- <script src="js/button control.js" type="text/javascript"></script> -->
	<script src="js/my_functions.js"></script>
	
</head>
<body>
	<div class="htmleaf-container">
		<header class="htmleaf-header">
			<h1>Public Opinions of Politicians<span>Survey 1</span></h1>


			<!--<div class="htmleaf-links">
				<a class="htmleaf-icon icon-htmleaf-home-outline" href="index" title="Come back home" ><span> Homepage</span></a>
				<a class="htmleaf-icon icon-htmleaf-arrow-forward-outline" href="http://www.htmleaf.com/jQuery/Form/201812285474.html" title="返回下载页" target="_blank"><span> 返回下载页</span></a>
			</div> -->
		</header>
	</div>
<!--page 1 pre-survey-->


         <div class="demo">
	        <div class="container">
	        	<section id="leftsection" style="max-width:300px;">
	        		<img id="theImage" src="" alt="Smiley face" style="
							width:auto;
							height:auto;
							max-width:100%;
							max-height: 100%;">
					<div style="text-align:center;"><label id="people-name" style="text-align:center; font-size: 22px; margin: 0 auto;"></label></div>
	        	</section>
<!-- 	        	<div class="col-xs-4">
	        		<img id="theImage" src="" alt="Smiley face" style="
							width:auto;
							height:auto;
							max-width:100%;
							max-height: 100%;">
					<center><p id='people-name'></p></center>
	        	</div>
				<div class="col-xs-8"></div> -->



  				<aside>
  					<label>
	            		1. How attractive do you think this person is in general?
	            	</label>
					<div class="range-slider" id="E1-slider1" style="margin-bottom: 30px;">
			            <input type="range" value="50" min="0" max="100">
			            <span id="slider-id1" class="range-value">0</span>
			            	<label class="form-inline1" >Not at all(0)</label>
 							<label class="form-inline1" >Neutral/Uncertain(50)</label>
 							<label class="form-inline1" >Extremely attrative(100)</label>

 							

			            <!--<table width=100% style='font-family: monospace;'>
					    <tr style='border-bottom: 1px solid #000;'>
					        <td>
					            |
					        </td>
					      	<td width=15%>
					            |
					        </td>
					    </tr>
					    <tr>
					        <td>Not at all </td>
					        <td width=30%>Extremely attractive</td>
					    </tr>
					</table>-->
			        </div> 

			        <label>
	            		2. How competent do you think this person appears? 
	            	</label>
					<div class="range-slider" id="E1-slider2" style="margin-bottom: 30px;">
			            <input type="range" value="50" min="0" max="100">
			            <span id="slider-id2" class="range-value">0</span>
				            <label class="form-inline1" >Not at all(0)</label>
 							<label class="form-inline1" >Neutral/Uncertain(50)</label>
 							<label class="form-inline1" >Extremely competent(100)</label>

			        </div> 

			        <label>
	            		3. How warm do you think this person seems?
	            	</label>
					<div class="range-slider" id="E1-slider3" style="margin-bottom: 30px;">
			            <input type="range" value="50" min="0" max="100">
			            <span id="slider-id3" class="range-value">0</span>
				            <label class="form-inline1" >Not at all(0)</label>
 							<label class="form-inline1" >Neutral/Uncertain(50)</label>
 							<label class="form-inline1" >Extremely warm(100)</label>
			        </div> 


			        <label>
	            		4. How dominant do you think this person is?
	            	</label>
					<div class="range-slider" id="E1-slider4" style="margin-bottom: 30px;">
			            <input type="range" value="50" min="0" max="100">
			            <span id="slider-id4" class="range-value">0</span>
 							<label class="form-inline1" >Not at all(0)</label>
 							<label class="form-inline1" >Neutral/Uncertain(50)</label>
 							<label class="form-inline1" >Extremely dominant(100)</label>

			        </div>

			        <label>
	            		5. How likely will you vote for him/her?
	            	</label>
					<div class="range-slider" id="E1-slider5" style="margin-bottom: 30px;">
			            <input type="range" value="50" min="0" max="100">
			            <span id="slider-id5" class="range-value">0</span>
			    			<label class="form-inline1" >Not at all(0)</label>
 							<label class="form-inline1" >Neutral/Uncertain(50)</label>
 							<label class="form-inline1" >Extremely likely(100)</label>

			        </div>
  				</aside>
  			</div>

			<!-- <center>
				<input class="shift-btn" type="button" id="theButton" value="Next" onclick="pictureChange()">
			</center> -->
			<div class="instructionsnav">
				<div class="row">
					<div class="col-xs-2">
						<!-- no previous button on first screen -->
					</div>
					<div class="col-xs-8" style="text-align: center;">
						<input class="shift-btn" type="button" id="theButton" value="Next" onclick="pictureChange()">

					</div>
					<div class="col-xs-2">
						<!-- <button type="button" id="next" value="next" class="btn btn-primary btn-lg continue" onclick="pictureChange()">Next <span class="glyphicon glyphicon-arrow-right"></span></button> -->
					</div>
				</div>
			</div>
		</div>


 <!--   	<center><div class="btn">
		<a href="./Experiment01-1.html" class="myButton">Next</a>
		</div></center>
	-->


		<div class="related">
		    <h4>Copyright © CANLAB, All Rights Reserved.</h4>
			<!-- <a href="Email: xxxxxx@colorado.edu">Email: xxxxxx@colorado.edu</a> -->
		</div>
	
	<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
	<script src="js/button control.js" type="text/javascript"></script>
	<!-- <script data-main="scripts/main" src="/static/js/require.js"></script> -->
	<script>
		var female_names = ['Lynn_Jenkins_012_F_R.jpg', 'Anna_Eshoo_004_F_D.jpg', 'Carolyn_McCarthy_008_F_D.jpg', 'Deborah_Pryce_011_F_R.jpg', 'Jackie_Speier_005_F_D.jpg', 'Sue_Myrick_019_F_R.jpg', 'Nydia_Velazquez_009_F_D.jpg', 'Barb_Cubin_014_F_R.jpg', 'Cathy_McMorris-Rodgers_016_F_R.jpg', 'Mary_Bono-Mack_018_F_R.jpg', 'Marsha_Blackburn_020_F_R.jpg', 'Loretta_Sanchez_006_F_D.jpg', 'Barbara_Lee_002_F_D.jpg', 'Ellen_Tauscher_003_F_D.jpg', 'Judy_Biggert_017_F_R.jpg', 'Carol_Shea-Porter_010_F_D.jpg', 'Virginia_Foxx_015_F_R.jpg', 'Jean_Schmidt_013_F_R.jpg', 'Corrine_Brown_007_F_D.jpg', 'Lynn_Woolsey_001_F_D.jpg']
		var male_names = ['Sam_Graves_018_M_R.jpg', 'Joe_Baca_011_M_D.jpg', 'Dan_Lipinski_007_M_D.jpg', 'Tom_Rooney_010_M_D.jpg', 'Ed_Pastor_002_M_D.jpg', 'John_Shadegg_003_M_R.jpg', 'Chris_Murphy_012_M_Djpg.jpg', 'Trent_Franks_004_M_R.jpg', 'Rick_Renzi_005_M_R.jpg', 'Robert_Wexler_009_M_D.jpg', 'Harry_Mitchell_001_M_D.jpg', 'Erik_Paulsen_017_M_R.jpg', 'Marion_Berry_006_M_D.jpg', 'John_Larson_008_M_D.jpg', 'Allen_Boyd_013_M_D.jpg', 'Thaddeus_McCotter_014_M_R.jpg', 'Vern_Ehlers_016_M_R.jpg', 'Greg_Harper_015_M_R.jpg', 'Gary_Peters_019_M_R.jpg', 'Pete_Hoekstra_020_M_R.jpg']

		var female_shown_names = [];
		var male_shown_names = [];
		var pos_pool = []
		for (var i = 0; i < female_names.length; i++) {
			pos_pool.push(i);
			var current_female_name = female_names[i].split("_");
			var current_male_name = male_names[i].split("_");
			female_shown_names.push(current_female_name[0] + " " + current_female_name[1]);
			male_shown_names.push(current_male_name[0] + " " + current_male_name[1]);
		}

		var public_photo_path = '/static/images/Political_campaign_photo/'

		var female_photo = []
		var male_photo = []

		for (var i = 0; i < pos_pool.length; i++) {
			female_photo.push(public_photo_path + 'Female/' + female_names[i]);
			male_photo.push(public_photo_path + 'Male/' + male_names[i]);
		}

		// var public_name_path = './experiment_data/Political_campaign_name/'
		// var last_name_path = public_name_path + 'Last\_name.json'
		
		// var last_names = ["Clark", "Rodriguez", "Lewis", "Lee", "Walker", "Hall",  "Allen", "Young", "Hernandez", "King", "Wright", "Lopez", "Hill", "Scott", "Green", "Adams", "Baker", "Gonzalez",  "Nelson", "Carter"]
		// var female_names = ["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy"]
		// var male_names = ["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas"]
		

		

		var all_shown_names = [];
		var all_shown_names_paths = []
		var all_pos_pool = [];
		for (var i = 0; i < pos_pool.length; i++) {
			all_shown_names.push(female_shown_names[i]);
			all_shown_names_paths.push(female_photo[i]);
			all_pos_pool.push(i);
		}
		for (var i = 0; i < pos_pool.length; i++) {
			all_shown_names.push(male_shown_names[i]);
			all_shown_names_paths.push(male_photo[i]);
			all_pos_pool.push(i + pos_pool.length);
		}

		console.log(all_shown_names)
		
		// var current_index = all_pos_pool.length;
		var current_index = 39;
		var shuffled_all_pos_pool = shuffle_list(all_pos_pool);
		var name_values = [];

		function pictureChange() {
			console.log(current_index);
			current_index = current_index - 1;

			// test_alert();
			name_values.push([all_shown_names[shuffled_all_pos_pool[current_index]], get_values()]);

			if(current_index == -1) {
				// document.getElementById("theButton").value="Submit";
				// location.href = './Experiment02.html'

				psiTurk.recordUnstructuredData("ExpPart1", name_values);
				psiTurk.saveData();	
				
				psiTurk.showPage("Exp2Pre.html");
				return;
			}
			
			show_picture(current_index);

			slider_display();

			initial_all_sliders();

			console.log("amnb")

			var scrollToTop = window.setInterval(function() {
			    var pos = window.pageYOffset;
			    if ( pos > 0 ) {
			        window.scrollTo( 0, pos - 20 ); // how far to scroll on each step
			    } else {
			        window.clearInterval( scrollToTop );
			    }
			}, 16); // how fast to scroll (this equals roughly 60 fps)





			console.log("amnbnext")

		}
		
		// initial picture
		// pictureChange();
		
		function show_picture(current_index) {
			// set the first appeared situation.

			document.getElementById("theImage").src=all_shown_names_paths[shuffled_all_pos_pool[current_index]];
			document.getElementById("people-name").innerHTML = all_shown_names[shuffled_all_pos_pool[current_index]];
		}

		show_picture(current_index);

		function get_name_list(name_path) {
			var output = [];
			$(document).ready(function() {
				$.getJSON(name_path, function(data) {
					// console.log(data);
					output.push(data);
					// for (var i = 0; i < data.length; i++) {
					// 	console.log(data[i].content);
					// }
					// lang = data;
				});
			});
			return output;
		}

		// ////////////////////////////////////////////////////////////////
		// Get slider values
		function display_slider_values(span_id) {
			var slider_value = document.getElementById(span_id).innerText;
			console.log(slider_value);
			return slider_value;
		}

		function get_values() {
			slider_idx = ["slider-id1", "slider-id2", "slider-id3", "slider-id4", "slider-id5"]
			question_values = []
			for (var i = 0; i < slider_idx.length; i++) {
				question_values.push(display_slider_values(slider_idx[i]));
			}
			// alert(question_values);
			return question_values;
		}

		function initial_all_sliders() {
			slider_div_names = ["E1-slider1", "E1-slider2", "E1-slider3", "E1-slider4", "E1-slider5"];
			default_value = 50;
			for (var i = 0; i < slider_div_names.length; i++) {
				var div = document.getElementById(slider_div_names[i]);
				var inputs = div.getElementsByTagName("input");
				inputs[0].value = default_value;
			}
		}

		function slider_display () {
			var slider = $('.range-slider');
			// var slider = $('#E1-slider1')
			// var slider = document.getElementById("E1-slider1")
				range = $('.range-slider input[type="range"]');
				value = $('.range-value');
			
			// var la = 0;
			var current_slider_values = [];
			slider.each(function(){
				value.each(function(){
					var value = $(this).prev().attr('value');
					$(this).html(value);
				});
				range.on('input', function(){
					$(this).next(value).html(this.value);
					// console.log(value.prev().attr('value')); // this is the current slider value
					
					// console.log(la % 5);
					// if (la % 5 == 0) {
					// 	var div = document.getElementById("E1-slider1");
					// 	var spans = div.getElementsByTagName("span");
					// 	// console.log(spans[0].innerText)
					// 	var inputs = div.getElementsByTagName("input");
					// 	inputs[0].value = this.value;
					// 	console.log(inputs[0].value)
					// }
					// la += 1;

					var idx = $(this).next(value).attr('id');
					var div = document.getElementById("E1-slider" + idx.slice(-1));
					var spans = div.getElementsByTagName("span");
					// console.log(spans[0].innerText)
					var inputs = div.getElementsByTagName("input");
					inputs[0].value = this.value;
					spans[0].value = this.value;
					display_slider_values("slider-id" + idx.slice(-1))
				});
				console.log("sdfasdfs");
			});
			// console.log("safasdfsadf")
		};
		





		    $(function () {  
		    var ie6 = document.all;  
		    var dv = $('#leftsection'), st;  
		    dv.attr('otop', dv.offset().top); 
		    $(window).scroll(function () {  
		    st = Math.max(document.body.scrollTop || document.documentElement.scrollTop);  
		    if (st > parseInt(dv.attr('otop'))) {  
		    if (ie6) { 
		    dv.css({ position: 'absolute', top: st });  
		    }  
		    else if (dv.css('position') != 'fixed') dv.css({ 'position': 'fixed', top: 0 });  
		    } else if (dv.css('position') != 'static') dv.css({ 'position': 'static' });  
		    });  
		    });

	</script>

<!--	<script>
		$(document).ready(function(){
	    var rangeSlider = function(){
	        var slider = $('.range-slider'),
	            range = $('.range-slider input[type="range"]'),
	            value = $('.range-value');
	        slider.each(function(){
	            value.each(function(){
	                var value = $(this).prev().attr('value');
	                $(this).html(value);
	            });
	            range.on('input', function(){
	                $(this).next(value).html(this.value);
	            });
	        });
	    };
	    rangeSlider();
	});
	</script>-->
</body>
</html>